---
import type { InferCmsOutput } from '@@sf/content';
import { pageHeroCmsFields, usePageHero } from '@@sf/layouts/use-page-main';
import BannerPictures from '@@sf/components/BannerPictures.astro';
import HeroSlider from '~/components/HeroSlider.vue';

export const cmsFields = pageHeroCmsFields;

type HeroContent = InferCmsOutput<typeof cmsFields>;
const { routeContext } = Astro.locals;
const heroSlider = (await usePageHero({ routeContext })).heroSlider satisfies HeroContent;
const { slides = [], ...props } = heroSlider;
---

{slides.length > 0 && <>
  <HeroSlider {...props} {slides} client:sf="lazy">
    {slides[0] && <BannerPictures slot="picture-0" {...slides[0]} index={0} />}
    {slides[1] && <BannerPictures slot="picture-1" {...slides[1]} index={1} />}
    {slides[2] && <BannerPictures slot="picture-2" {...slides[2]} index={2} />}
    {slides[3] && <BannerPictures slot="picture-3" {...slides[3]} index={3} />}
    {slides[4] && <BannerPictures slot="picture-4" {...slides[4]} index={4} />}
    {slides[5] && <BannerPictures slot="picture-5" {...slides[5]} index={5} />}
    {slides[6] && <BannerPictures slot="picture-6" {...slides[6]} index={6} />}
    {slides[7] && <BannerPictures slot="picture-7" {...slides[7]} index={7} />}
    {slides[8] && <BannerPictures slot="picture-8" {...slides[8]} index={8} />}
    {slides[9] && <BannerPictures slot="picture-9" {...slides[9]} index={9} />}
    <!-- https://github.com/withastro/astro/issues/5066#issuecomment-1277998365 -->
  </HeroSlider>
</>}
